<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creative Studio - Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/dashboard-modern.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dashboard">
  <!-- Top Navbar -->
  <nav class="navbar-top">
    <button id="hamburgerBtn" class="hamburger-btn" onclick="toggleSidebar()">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="navbar-brand">
      <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="brand-icon">
        <rect x="4" y="4" width="20" height="20" rx="6" fill="url(#brandGradient)" stroke="white" stroke-width="1.5"/>
        <path d="M14 10V18M10 14H18" stroke="white" stroke-width="2" stroke-linecap="round"/>
        <defs>
          <linearGradient id="brandGradient" x1="4" y1="4" x2="24" y2="24" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#667eea"/>
            <stop offset="100%" stop-color="#764ba2"/>
          </linearGradient>
        </defs>
      </svg>
      <h2>Team Dashboard</h2>
    </div>
    <div class="navbar-center">
      <div class="user-avatar" id="topUserAvatar">E</div>
      <span id="topUsername" class="welcome-text">Welcome, Elsy</span>
    </div>
    <button onclick="logout()" class="logout-btn">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
        <polyline points="16 17 21 12 16 7"></polyline>
        <line x1="21" y1="12" x2="9" y2="12"></line>
      </svg>
      Logout
    </button>
  </nav>

  <!-- Mobile Overlay (closes drawer when clicked) -->
  <div id="sidebarOverlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

  <div class="dashboard-wrapper">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="profile-avatar" id="profileAvatar">üë§</div>
        <h3 id="sidebarUsername">User</h3>
        <p id="sidebarEmail">email@example.com</p>
        <span id="roleBadge" class="role-badge">Team Member</span>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" onclick="showTab('overview')">
          <span>üìä</span> Overview
        </button>

        <button class="nav-item" onclick="showTab('files')">
          <span>üìÅ</span> Files
        </button>

        <button class="nav-item" onclick="showTab('backups')">
          <span>üíæ</span> Backup History
        </button>

        <button class="nav-item" onclick="showTab('profile')">
          <span>üë§</span> Profile Settings
        </button>
      </nav>

      <div class="sidebar-footer">
        <p class="storage-info">
          <strong id="storageUsed">0</strong> / 
          <strong>50MB</strong>
        </p>
        <div class="storage-bar">
          <div class="storage-fill" id="storageFill"></div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Overview Tab -->
      <div class="content" id="overviewTab">
        <!-- Quick Stats Grid -->
        <div class="dashboard-section">
          <div class="section-header">
            <h2>Quick Overview</h2>
          </div>
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-icon files-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                  <polyline points="13 2 13 9 20 9"></polyline>
                </svg>
              </div>
              <div class="metric-info">
                <span class="metric-label">Files</span>
                <span class="metric-value" id="totalFiles">0</span>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon backup-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path>
                </svg>
              </div>
              <div class="metric-info">
                <span class="metric-label">Backups</span>
                <span class="metric-value" id="totalBackups">0</span>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon storage-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M2 20h20v-8H2z"></path>
                  <path d="M2 20V6c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2v14"></path>
                  <circle cx="7" cy="15" r="1"></circle>
                  <circle cx="17" cy="15" r="1"></circle>
                </svg>
              </div>
              <div class="metric-info">
                <span class="metric-label">Storage Used</span>
                <span class="metric-value" id="storageUsedPercent">0%</span>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon activity-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                  <polyline points="17 6 23 6 23 12"></polyline>
                </svg>
              </div>
              <div class="metric-info">
                <span class="metric-label">Last Activity</span>
                <span class="metric-value" id="lastActivity">-</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Storage Analytics Section -->
        <div class="dashboard-section">
          <div class="section-header">
            <h2>Storage Analytics</h2>
          </div>
          <div class="storage-widget">
            <div class="storage-chart-wrapper">
              <canvas id="overviewStorageChart"></canvas>
            </div>
            <div class="storage-details">
              <div class="storage-stat">
                <span class="storage-label">Used</span>
                <span class="storage-amount"><span id="overviewStorageUsedText">0</span> MB</span>
              </div>
              <div class="storage-stat">
                <span class="storage-label">Total</span>
                <span class="storage-amount"><span id="overviewStorageMaxText">50</span> MB</span>
              </div>
              <div class="storage-stat">
                <span class="storage-label">Available</span>
                <span class="storage-amount"><span id="overviewStorageAvailable">50</span> MB</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content" id="filesTab" style="display: none;">
        <div class="overview-header">
          <h1>File Management</h1>
          <p>Manage your files and create backups.</p>
        </div>

        <!-- Upload Card -->
        <div class="card upload-card">
          <div class="card-header">
            <h3>Upload New File</h3>
            <span class="max-size">Max 50MB</span>
          </div>
          <div id="alertContainer"></div>
          <div class="upload-zone" id="uploadZone">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <p class="upload-title">Drag and drop your file here</p>
            <p class="upload-subtitle">or click to browse</p>
            <input type="file" id="fileInput">
          </div>
          <div id="uploadProgress" class="upload-progress">
            <p id="progressText">Uploading...</p>
            <div class="progress-bar-container">
              <div id="progressBar" class="progress-bar-fill"></div>
            </div>
          </div>
        </div>

        <!-- Storage Overview Card -->
        <div class="card storage-card">
          <div class="card-header">
            <h3>Storage Usage</h3>
            <span class="storage-info-text"><span id="storageUsedText">0</span> / <span id="storageMaxText">50</span> MB</span>
          </div>
          <div class="chart-container">
            <canvas id="storageChart"></canvas>
          </div>
        </div>

        <!-- Files List Card -->
        <div class="card files-card">
          <div class="card-header">
            <h3>My Files</h3>
            <div class="files-controls">
              <input 
                type="text" 
                id="fileSearch" 
                placeholder="Search files..." 
                class="search-input"
                onkeyup="filterFiles()"
              >
              <select id="fileSortBy" onchange="sortFiles()" class="sort-select">
                <option value="recent">Recent</option>
                <option value="name">Name A-Z</option>
                <option value="size">Size</option>
              </select>
            </div>
          </div>
          <div id="filesList" class="files-list">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading files...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Tab -->
      <div id="profileTab" style="display: none;">
        <div class="card">
          <h3>Profile Settings</h3>
          <div id="profileAlertContainer"></div>

          <form id="profileForm">
            <div class="form-group">
              <label for="profileUsername">Full Name</label>
              <input type="text" id="profileUsername" required>
            </div>

            <div class="form-group">
              <label for="profileEmail">Email Address</label>
              <input type="email" id="profileEmail" disabled>
            </div>

            <div class="form-group">
              <label for="profilePhone">Phone Number</label>
              <input type="tel" id="profilePhone" placeholder="+1 (555) 000-0000">
            </div>

            <div class="form-group">
              <label for="profileAddress">Street Address</label>
              <input type="text" id="profileAddress" placeholder="123 Main Street">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
              <div class="form-group">
                <label for="profileCity">City</label>
                <input type="text" id="profileCity" placeholder="New York">
              </div>

              <div class="form-group">
                <label for="profileCountry">Country</label>
                <input type="text" id="profileCountry" placeholder="United States">
              </div>
            </div>

            <div class="form-group">
              <label for="profileBio">Bio</label>
              <textarea id="profileBio" placeholder="Tell us about yourself" rows="4"></textarea>
            </div>

            <button type="submit" style="margin-bottom: 20px;">Save Profile</button>
          </form>

          <hr style="margin: 30px 0; border: 1px solid #e2e8f0;">

          <h3 style="margin-top: 30px;">Change Password</h3>
          <form id="passwordForm">
            <div class="form-group">
              <label for="currentPassword">Current Password</label>
              <input type="password" id="currentPassword" required placeholder="Enter current password">
            </div>

            <div class="form-group">
              <label for="newPassword">New Password</label>
              <input type="password" id="newPassword" required placeholder="Enter new password">
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirm Password</label>
              <input type="password" id="confirmPassword" required placeholder="Confirm new password">
            </div>

            <button type="submit">Change Password</button>
          </form>
        </div>
      </div>

      <!-- Backup Tab -->
      <div id="backupsTab" style="display: none;">
        <div class="card">
          <h3>Backup History</h3>
          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <input 
              type="text" 
              id="backupSearch" 
              placeholder="Search backups..." 
              style="flex: 1; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;"
              onkeyup="filterBackups()"
            >
            <select id="backupStatusFilter" onchange="filterBackups()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
              <option value="">All Status</option>
              <option value="completed">Completed</option>
              <option value="pending">Pending</option>
              <option value="failed">Failed</option>
            </select>
          </div>
          <div id="backupListTab">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading backups...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>
